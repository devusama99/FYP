{"ast":null,"code":"var _jsxFileName = \"/Users/devusama/Work/FYP_FrontEnd/src/components/ProfileUpdate.js\",\n    _s = $RefreshSig$();\n\nimport { Avatar, Typography, Button, TextField } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport Snackbar from \"./Snackbar\";\nimport Progress from \"./ButtonLoader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    width: \"80px\",\n    height: \"80px\"\n  },\n  changeImgContainer: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginBottom: theme.spacing(8)\n  },\n  marginLeft: {\n    marginLeft: theme.spacing(3),\n    [theme.breakpoints.down(\"sm\")]: {\n      marginLeft: 0\n    }\n  },\n  formContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\",\n    padding: theme.spacing(5),\n    borderRadius: theme.shape.borderRadius,\n    boxShadow: \"8px 9px 25px rgba(0, 0, 0, 0.06)\",\n    border: `1px solid ${theme.palette.primary.light}`,\n    backgroundColor: theme.palette.light.main,\n    width: \"48%\",\n    [theme.breakpoints.down(\"md\")]: {\n      marginBottom: theme.spacing(4),\n      width: \"100%\"\n    }\n  },\n  input: {\n    display: \"none\"\n  },\n  changePhotoBtn: {\n    backgroundImage: \"linear-gradient(95.47deg, #0067B1 0.51%, #008181 99.64%)\",\n    boxShadow: \"0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px rgba(0, 0, 0, 0.14), 0px 1px 5px rgba(0, 0, 0, 0.12)\",\n    marginLeft: theme.spacing(2)\n  },\n  updateBtns: {\n    backgroundImage: \"linear-gradient(95.47deg, #0067B1 0.51%, #008181 99.64%)\",\n    boxShadow: \"0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px rgba(0, 0, 0, 0.14), 0px 1px 5px rgba(0, 0, 0, 0.12)\",\n    color: theme.palette.light.main\n  },\n  formHeading: {\n    fontWeight: \"bold\",\n    color: theme.palette.secondary.main,\n    marginBottom: theme.spacing(6),\n    textAlign: \"center\"\n  },\n  inputFeild: {\n    marginBottom: theme.spacing(4)\n  },\n  content: {\n    width: \"98.5%\",\n    boxSizing: \"border-box\",\n    margin: theme.spacing(7),\n    [theme.breakpoints.down(\"md\")]: {\n      margin: theme.spacing(7),\n      width: \"100%\"\n    },\n    [theme.breakpoints.down(\"sm\")]: {\n      margin: theme.spacing(4)\n    }\n  },\n  gridItem: {\n    padding: 0\n  },\n  container: {\n    display: \"flex\",\n    alignItems: \"stretch\",\n    justifyContent: \"space-between\",\n    [theme.breakpoints.down(\"sm\")]: {\n      flexDirection: \"column\"\n    }\n  }\n}));\n\nfunction ProfileUpdate() {\n  _s();\n\n  var _errors$firstName, _errors$lastName, _errors$userEmail, _errors$username, _errors1$password, _errors1$password2, _errors1$confirmPassw;\n\n  const classes = useStyles();\n  const {\n    REACT_APP_BACKEND: BACKEND\n  } = process.env;\n  const [infoLoading, setInfoLoading] = useState(false);\n  const [passwordLoading, setPasswordLoading] = useState(false);\n  const [snackData, setSnackData] = useState({\n    type: \"\",\n    message: \"\",\n    open: false\n  });\n  const {\n    register,\n    formState: {\n      errors\n    },\n    handleSubmit,\n    setValue\n  } = useForm();\n  const {\n    register: register1,\n    formState: {\n      errors: errors1\n    },\n    handleSubmit: handleSubmit1,\n    setValue: setValue1,\n    watch\n  } = useForm();\n  const password = useRef({});\n  password.current = watch(\"password\", \"\");\n\n  function updatePassword(data) {\n    setPasswordLoading(true);\n    setSnackData({ ...snackData,\n      open: false\n    });\n    var config = {\n      method: \"put\",\n      url: `${BACKEND}/userRouter/updateProfile`,\n      headers: {\n        Authorization: localStorage.getItem(\"token\"),\n        \"Content-Type\": \"application/json\"\n      },\n      data: { ...data,\n        username: JSON.parse(localStorage.getItem(\"user\")).username\n      }\n    };\n    axios(config).then(function (response) {\n      setSnackData({\n        message: \"Password Updated Succesfully\",\n        type: \"success\",\n        open: true\n      });\n      setValue1(\"oldPassword\", \"\");\n      setValue1(\"password\", \"\");\n      setValue1(\"confirmPassword\", \"\");\n      console.log(JSON.stringify(response.data));\n      setPasswordLoading(false);\n    }).catch(function (error) {\n      console.log(error);\n      setSnackData({\n        message: \"Error Updating Password\",\n        type: \"error\",\n        open: true\n      });\n      setPasswordLoading(false);\n    });\n  }\n\n  function updateInformation(data) {\n    setInfoLoading(true);\n    setSnackData({ ...snackData,\n      open: false\n    });\n    var config = {\n      method: \"put\",\n      url: `${BACKEND}/userRouter/updateProfile`,\n      headers: {\n        Authorization: localStorage.getItem(\"token\"),\n        \"Content-Type\": \"application/json\"\n      },\n      data: data\n    };\n    axios(config).then(function (response) {\n      setSnackData({\n        message: \"Information Updated Succesfully\",\n        type: \"success\",\n        open: true\n      });\n      console.log(JSON.stringify(response.data));\n      localStorage.removeItem(\"user\");\n      localStorage.setItem(\"user\", JSON.stringify(response.data));\n      setInfoLoading(false);\n    }).catch(function (error) {\n      console.log(error);\n      setSnackData({\n        message: \"Error Updating Information\",\n        type: \"error\",\n        open: true\n      });\n      setInfoLoading(false);\n    });\n  }\n\n  function plotData(data) {\n    setValue(\"firstName\", data.firstName);\n    setValue(\"lastName\", data.lastName);\n    setValue(\"username\", data.username);\n    setValue(\"userEmail\", data.userEmail);\n  }\n\n  useEffect(() => {\n    plotData(JSON.parse(localStorage.getItem(\"user\")));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.content,\n    children: [/*#__PURE__*/_jsxDEV(Snackbar, {\n      open: snackData.open,\n      type: snackData.type,\n      message: snackData.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.changeImgContainer,\n      children: [/*#__PURE__*/_jsxDEV(Avatar, {\n        src: \"https://mdbootstrap.com/img/new/avatars/2.jpg\",\n        className: classes.avatar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          accept: \"image/*\",\n          className: classes.input,\n          id: \"contained-button-file\",\n          multiple: true,\n          type: \"file\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"contained-button-file\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            component: \"span\",\n            className: classes.changePhotoBtn,\n            children: \"Change Picture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.container,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.formContainer,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          className: classes.formHeading,\n          children: \"Personal Information\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          noValidate: true,\n          onSubmit: handleSubmit(data => {\n            updateInformation(data);\n          }),\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            InputLabelProps: {\n              shrink: true\n            },\n            size: \"medium\",\n            color: \"primary\",\n            label: \"First Name\",\n            name: \"firstName\",\n            className: classes.inputFeild,\n            ...register(\"firstName\", {\n              required: \"First name required\",\n              pattern: {\n                value: /^[a-zA-Z ]*$/,\n                message: \"Invalid first name\"\n              }\n            }),\n            error: Boolean(errors.firstName),\n            helperText: (_errors$firstName = errors.firstName) === null || _errors$firstName === void 0 ? void 0 : _errors$firstName.message,\n            fullWidth: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            InputLabelProps: {\n              shrink: true\n            },\n            size: \"medium\",\n            color: \"primary\",\n            label: \"Last Name\",\n            className: classes.inputFeild,\n            name: \"lastName\",\n            ...register(\"lastName\", {\n              required: \"Last name required\",\n              pattern: {\n                value: /^[a-zA-Z ]*$/,\n                message: \"Invalid last name\"\n              }\n            }),\n            error: Boolean(errors.lastName),\n            helperText: (_errors$lastName = errors.lastName) === null || _errors$lastName === void 0 ? void 0 : _errors$lastName.message,\n            fullWidth: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            InputLabelProps: {\n              shrink: true\n            },\n            size: \"medium\",\n            color: \"primary\",\n            label: \"Email\",\n            name: \"userEmail\",\n            className: classes.inputFeild,\n            ...register(\"userEmail\", {\n              required: \"Email required\",\n              pattern: {\n                value: /^[a-zA-Z]+[a-zA-Z0-9_.-]{1,}\\@([A-Za-z0-9_\\-\\.]){1,}\\.([A-Za-z]){2,4}$/,\n                message: \"Invalid email\"\n              }\n            }),\n            error: Boolean(errors.userEmail),\n            helperText: (_errors$userEmail = errors.userEmail) === null || _errors$userEmail === void 0 ? void 0 : _errors$userEmail.message,\n            fullWidth: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            InputLabelProps: {\n              shrink: true\n            },\n            size: \"medium\",\n            color: \"primary\",\n            label: \"Username\",\n            name: \"username\",\n            disabled: true,\n            className: classes.inputFeild,\n            ...register(\"username\", {\n              required: \"Username Required\",\n              pattern: {\n                value: /^[a-zA-Z]+[a-zA-Z0-9_.-]{2,}$/,\n                minLength: {\n                  value: 6,\n                  message: \"Username can not be less than 3 characters\"\n                },\n                message: \"Invalid Username\"\n              }\n            }),\n            error: Boolean(errors.username),\n            helperText: (_errors$username = errors.username) === null || _errors$username === void 0 ? void 0 : _errors$username.message,\n            fullWidth: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            variant: \"contained\",\n            disabled: infoLoading,\n            type: \"submit\",\n            children: [\"Update Information\", infoLoading ? /*#__PURE__*/_jsxDEV(Progress, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 30\n            }, this) : \"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: [classes.formContainer, classes.marginLeft].join(\" \"),\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          className: classes.formHeading,\n          children: \"Change Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          noValidate: true,\n          onSubmit: handleSubmit1(data => {\n            updatePassword(data);\n          }),\n          className: classes.passwordSection,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            InputLabelProps: {\n              shrink: true\n            },\n            size: \"medium\",\n            color: \"primary\",\n            label: \"Old Password\",\n            className: classes.inputFeild,\n            name: \"oldPassword\",\n            ...register1(\"oldPassword\", {\n              required: \"Password Required\",\n              minLength: {\n                value: 6,\n                message: \"Invalid Password\"\n              }\n            }),\n            type: \"password\",\n            fullWidth: true,\n            error: Boolean(errors1.password),\n            helperText: (_errors1$password = errors1.password) === null || _errors1$password === void 0 ? void 0 : _errors1$password.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            InputLabelProps: {\n              shrink: true\n            },\n            size: \"medium\",\n            color: \"primary\",\n            label: \"New Password\",\n            className: classes.inputFeild,\n            name: \"password\",\n            ...register1(\"password\", {\n              required: \"Password Required\",\n              minLength: {\n                value: 6,\n                message: \"Invalid Password\"\n              }\n            }),\n            type: \"password\",\n            fullWidth: true,\n            error: Boolean(errors1.password),\n            helperText: (_errors1$password2 = errors1.password) === null || _errors1$password2 === void 0 ? void 0 : _errors1$password2.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            InputLabelProps: {\n              shrink: true\n            },\n            size: \"medium\",\n            color: \"primary\",\n            label: \"Confirm Password\",\n            className: classes.inputFeild,\n            name: \"confirmPassword\",\n            ...register1(\"confirmPassword\", {\n              required: \"Confirm Password Required\",\n              validate: value => value === password.current || \"Passwords do not match\"\n            }),\n            type: \"password\",\n            error: Boolean(errors1.confirmPassword),\n            helperText: (_errors1$confirmPassw = errors1.confirmPassword) === null || _errors1$confirmPassw === void 0 ? void 0 : _errors1$confirmPassw.message,\n            fullWidth: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            variant: \"contained\",\n            type: \"submit\",\n            disabled: passwordLoading,\n            children: [\"Update Password \", passwordLoading ? /*#__PURE__*/_jsxDEV(Progress, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 50\n            }, this) : \"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 207,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProfileUpdate, \"3WPYCgSFdr0Q+LAWZkhaDaqTR3I=\", false, function () {\n  return [useStyles, useForm, useForm];\n});\n\n_c = ProfileUpdate;\nexport default ProfileUpdate;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileUpdate\");","map":{"version":3,"sources":["/Users/devusama/Work/FYP_FrontEnd/src/components/ProfileUpdate.js"],"names":["Avatar","Typography","Button","TextField","makeStyles","useEffect","useRef","useState","useForm","axios","Snackbar","Progress","useStyles","theme","avatar","width","height","changeImgContainer","display","justifyContent","alignItems","marginBottom","spacing","marginLeft","breakpoints","down","formContainer","flexDirection","padding","borderRadius","shape","boxShadow","border","palette","primary","light","backgroundColor","main","input","changePhotoBtn","backgroundImage","updateBtns","color","formHeading","fontWeight","secondary","textAlign","inputFeild","content","boxSizing","margin","gridItem","container","ProfileUpdate","classes","REACT_APP_BACKEND","BACKEND","process","env","infoLoading","setInfoLoading","passwordLoading","setPasswordLoading","snackData","setSnackData","type","message","open","register","formState","errors","handleSubmit","setValue","register1","errors1","handleSubmit1","setValue1","watch","password","current","updatePassword","data","config","method","url","headers","Authorization","localStorage","getItem","username","JSON","parse","then","response","console","log","stringify","catch","error","updateInformation","removeItem","setItem","plotData","firstName","lastName","userEmail","shrink","required","pattern","value","Boolean","minLength","join","passwordSection","validate","confirmPassword"],"mappings":"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","sourcesContent":["import { Avatar, Typography, Button, TextField } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport Snackbar from \"./Snackbar\";\nimport Progress from \"./ButtonLoader\";\n\nconst useStyles = makeStyles((theme) => ({\n  avatar: {\n    width: \"80px\",\n    height: \"80px\",\n  },\n  changeImgContainer: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginBottom: theme.spacing(8),\n  },\n  marginLeft: {\n    marginLeft: theme.spacing(3),\n    [theme.breakpoints.down(\"sm\")]: {\n      marginLeft: 0,\n    },\n  },\n  formContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\",\n    padding: theme.spacing(5),\n    borderRadius: theme.shape.borderRadius,\n    boxShadow: \"8px 9px 25px rgba(0, 0, 0, 0.06)\",\n    border: `1px solid ${theme.palette.primary.light}`,\n    backgroundColor: theme.palette.light.main,\n    width: \"48%\",\n    [theme.breakpoints.down(\"md\")]: {\n      marginBottom: theme.spacing(4),\n      width: \"100%\",\n    },\n  },\n  input: {\n    display: \"none\",\n  },\n  changePhotoBtn: {\n    backgroundImage: \"linear-gradient(95.47deg, #0067B1 0.51%, #008181 99.64%)\",\n    boxShadow:\n      \"0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px rgba(0, 0, 0, 0.14), 0px 1px 5px rgba(0, 0, 0, 0.12)\",\n    marginLeft: theme.spacing(2),\n  },\n\n  updateBtns: {\n    backgroundImage: \"linear-gradient(95.47deg, #0067B1 0.51%, #008181 99.64%)\",\n    boxShadow:\n      \"0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px rgba(0, 0, 0, 0.14), 0px 1px 5px rgba(0, 0, 0, 0.12)\",\n    color: theme.palette.light.main,\n  },\n  formHeading: {\n    fontWeight: \"bold\",\n    color: theme.palette.secondary.main,\n    marginBottom: theme.spacing(6),\n    textAlign: \"center\",\n  },\n  inputFeild: {\n    marginBottom: theme.spacing(4),\n  },\n  content: {\n    width: \"98.5%\",\n    boxSizing: \"border-box\",\n    margin: theme.spacing(7),\n\n    [theme.breakpoints.down(\"md\")]: {\n      margin: theme.spacing(7),\n      width: \"100%\",\n    },\n\n    [theme.breakpoints.down(\"sm\")]: {\n      margin: theme.spacing(4),\n    },\n  },\n  gridItem: {\n    padding: 0,\n  },\n  container: {\n    display: \"flex\",\n    alignItems: \"stretch\",\n    justifyContent: \"space-between\",\n    [theme.breakpoints.down(\"sm\")]: {\n      flexDirection: \"column\",\n    },\n  },\n}));\n\nfunction ProfileUpdate() {\n  const classes = useStyles();\n  const { REACT_APP_BACKEND: BACKEND } = process.env;\n  const [infoLoading, setInfoLoading] = useState(false);\n  const [passwordLoading, setPasswordLoading] = useState(false);\n  const [snackData, setSnackData] = useState({\n    type: \"\",\n    message: \"\",\n    open: false,\n  });\n  const {\n    register,\n    formState: { errors },\n    handleSubmit,\n    setValue,\n  } = useForm();\n  const {\n    register: register1,\n    formState: { errors: errors1 },\n    handleSubmit: handleSubmit1,\n    setValue: setValue1,\n    watch,\n  } = useForm();\n\n  const password = useRef({});\n  password.current = watch(\"password\", \"\");\n\n  function updatePassword(data) {\n    setPasswordLoading(true);\n    setSnackData({ ...snackData, open: false });\n    var config = {\n      method: \"put\",\n      url: `${BACKEND}/userRouter/updateProfile`,\n      headers: {\n        Authorization: localStorage.getItem(\"token\"),\n        \"Content-Type\": \"application/json\",\n      },\n      data: {\n        ...data,\n        username: JSON.parse(localStorage.getItem(\"user\")).username,\n      },\n    };\n\n    axios(config)\n      .then(function (response) {\n        setSnackData({\n          message: \"Password Updated Succesfully\",\n          type: \"success\",\n          open: true,\n        });\n        setValue1(\"oldPassword\",\"\");\n        setValue1(\"password\",\"\");\n        setValue1(\"confirmPassword\",\"\")\n        console.log(JSON.stringify(response.data));\n        setPasswordLoading(false);\n      })\n      .catch(function (error) {\n        console.log(error);\n        setSnackData({\n          message: \"Error Updating Password\",\n          type: \"error\",\n          open: true,\n        });\n        setPasswordLoading(false);\n      });\n  }\n\n  function updateInformation(data) {\n    setInfoLoading(true);\n    setSnackData({ ...snackData, open: false });\n    var config = {\n      method: \"put\",\n      url: `${BACKEND}/userRouter/updateProfile`,\n      headers: {\n        Authorization: localStorage.getItem(\"token\"),\n        \"Content-Type\": \"application/json\",\n      },\n      data: data,\n    };\n\n    axios(config)\n      .then(function (response) {\n        setSnackData({\n          message: \"Information Updated Succesfully\",\n          type: \"success\",\n          open: true,\n        });\n        console.log(JSON.stringify(response.data));\n        localStorage.removeItem(\"user\");\n        localStorage.setItem(\"user\", JSON.stringify(response.data));\n        setInfoLoading(false);\n      })\n      .catch(function (error) {\n        console.log(error);\n        setSnackData({\n          message: \"Error Updating Information\",\n          type: \"error\",\n          open: true,\n        });\n        setInfoLoading(false);\n      });\n  }\n\n  function plotData(data) {\n    setValue(\"firstName\", data.firstName);\n    setValue(\"lastName\", data.lastName);\n    setValue(\"username\", data.username);\n    setValue(\"userEmail\", data.userEmail);\n  }\n  useEffect(() => {\n    plotData(JSON.parse(localStorage.getItem(\"user\")));\n  }, []);\n  return (\n    <div className={classes.content}>\n      <Snackbar\n        open={snackData.open}\n        type={snackData.type}\n        message={snackData.message}\n      />\n      <div className={classes.changeImgContainer}>\n        <Avatar\n          src={\"https://mdbootstrap.com/img/new/avatars/2.jpg\"}\n          className={classes.avatar}\n        ></Avatar>\n        <span>\n          <input\n            accept=\"image/*\"\n            className={classes.input}\n            id=\"contained-button-file\"\n            multiple\n            type=\"file\"\n          />\n          <label htmlFor=\"contained-button-file\">\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              component=\"span\"\n              className={classes.changePhotoBtn}\n            >\n              Change Picture\n            </Button>\n          </label>\n        </span>\n      </div>\n      <div className={classes.container}>\n        <div className={classes.formContainer}>\n          <Typography variant={\"h5\"} className={classes.formHeading}>\n            Personal Information\n          </Typography>\n          <form\n            noValidate\n            onSubmit={handleSubmit((data) => {\n              updateInformation(data);\n            })}\n          >\n            <TextField\n              variant={\"outlined\"}\n              InputLabelProps={{ shrink: true }}\n              size={\"medium\"}\n              color={\"primary\"}\n              label={\"First Name\"}\n              name=\"firstName\"\n              className={classes.inputFeild}\n              {...register(\"firstName\", {\n                required: \"First name required\",\n                pattern: {\n                  value: /^[a-zA-Z ]*$/,\n                  message: \"Invalid first name\",\n                },\n              })}\n              error={Boolean(errors.firstName)}\n              helperText={errors.firstName?.message}\n              fullWidth\n            ></TextField>\n            <TextField\n              variant={\"outlined\"}\n              InputLabelProps={{ shrink: true }}\n              size={\"medium\"}\n              color={\"primary\"}\n              label={\"Last Name\"}\n              className={classes.inputFeild}\n              name=\"lastName\"\n              {...register(\"lastName\", {\n                required: \"Last name required\",\n                pattern: {\n                  value: /^[a-zA-Z ]*$/,\n                  message: \"Invalid last name\",\n                },\n              })}\n              error={Boolean(errors.lastName)}\n              helperText={errors.lastName?.message}\n              fullWidth\n            ></TextField>\n            <TextField\n              variant={\"outlined\"}\n              InputLabelProps={{ shrink: true }}\n              size={\"medium\"}\n              color={\"primary\"}\n              label={\"Email\"}\n              name=\"userEmail\"\n              className={classes.inputFeild}\n              {...register(\"userEmail\", {\n                required: \"Email required\",\n                pattern: {\n                  value:\n                    /^[a-zA-Z]+[a-zA-Z0-9_.-]{1,}\\@([A-Za-z0-9_\\-\\.]){1,}\\.([A-Za-z]){2,4}$/,\n                  message: \"Invalid email\",\n                },\n              })}\n              error={Boolean(errors.userEmail)}\n              helperText={errors.userEmail?.message}\n              fullWidth\n            ></TextField>\n            <TextField\n              variant={\"outlined\"}\n              InputLabelProps={{ shrink: true }}\n              size={\"medium\"}\n              color={\"primary\"}\n              label={\"Username\"}\n              name=\"username\"\n              disabled\n              className={classes.inputFeild}\n              {...register(\"username\", {\n                required: \"Username Required\",\n                pattern: {\n                  value: /^[a-zA-Z]+[a-zA-Z0-9_.-]{2,}$/,\n                  minLength: {\n                    value: 6,\n                    message: \"Username can not be less than 3 characters\",\n                  },\n                  message: \"Invalid Username\",\n                },\n              })}\n              error={Boolean(errors.username)}\n              helperText={errors.username?.message}\n              fullWidth\n            ></TextField>\n            <Button\n              color=\"primary\"\n              variant={\"contained\"}\n              disabled={infoLoading}\n              type=\"submit\"\n            >\n              Update Information\n              {infoLoading ? <Progress size={20} /> : \"\"}\n            </Button>\n          </form>\n        </div>\n        <div className={[classes.formContainer, classes.marginLeft].join(\" \")}>\n          <Typography variant={\"h5\"} className={classes.formHeading}>\n            Change Password\n          </Typography>\n          <form\n            noValidate\n            onSubmit={handleSubmit1((data) => {\n              updatePassword(data);\n            })}\n            className={classes.passwordSection}\n          >\n            <TextField\n              variant={\"outlined\"}\n              InputLabelProps={{ shrink: true }}\n              size={\"medium\"}\n              color={\"primary\"}\n              label={\"Old Password\"}\n              className={classes.inputFeild}\n              name=\"oldPassword\"\n              {...register1(\"oldPassword\", {\n                required: \"Password Required\",\n                minLength: { value: 6, message: \"Invalid Password\" },\n              })}\n              type={\"password\"}\n              fullWidth\n              error={Boolean(errors1.password)}\n              helperText={errors1.password?.message}\n            ></TextField>\n            <TextField\n              variant={\"outlined\"}\n              InputLabelProps={{ shrink: true }}\n              size={\"medium\"}\n              color={\"primary\"}\n              label={\"New Password\"}\n              className={classes.inputFeild}\n              name=\"password\"\n              {...register1(\"password\", {\n                required: \"Password Required\",\n                minLength: { value: 6, message: \"Invalid Password\" },\n              })}\n              type={\"password\"}\n              fullWidth\n              error={Boolean(errors1.password)}\n              helperText={errors1.password?.message}\n            ></TextField>\n            <TextField\n              variant={\"outlined\"}\n              InputLabelProps={{ shrink: true }}\n              size={\"medium\"}\n              color={\"primary\"}\n              label={\"Confirm Password\"}\n              className={classes.inputFeild}\n              name=\"confirmPassword\"\n              {...register1(\"confirmPassword\", {\n                required: \"Confirm Password Required\",\n                validate: (value) =>\n                  value === password.current || \"Passwords do not match\",\n              })}\n              type={\"password\"}\n              error={Boolean(errors1.confirmPassword)}\n              helperText={errors1.confirmPassword?.message}\n              fullWidth\n            ></TextField>\n            <Button\n              color=\"primary\"\n              variant={\"contained\"}\n              type=\"submit\"\n              disabled={passwordLoading}\n            >\n              Update Password {passwordLoading ? <Progress size={20} /> : \"\"}\n            </Button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ProfileUpdate;\n"]},"metadata":{},"sourceType":"module"}