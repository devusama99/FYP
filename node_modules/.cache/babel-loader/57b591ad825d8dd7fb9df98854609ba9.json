{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(a, b) {\n  var c = Object.keys(a);\n\n  if (Object.getOwnPropertySymbols) {\n    var d = Object.getOwnPropertySymbols(a);\n    b && (d = d.filter(function (b) {\n      return Object.getOwnPropertyDescriptor(a, b).enumerable;\n    })), c.push.apply(c, d);\n  }\n\n  return c;\n}\n\nfunction _objectSpread(a) {\n  for (var b, c = 1; c < arguments.length; c++) b = null == arguments[c] ? {} : arguments[c], c % 2 ? ownKeys(Object(b), !0).forEach(function (c) {\n    _defineProperty(a, c, b[c]);\n  }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(b)) : ownKeys(Object(b)).forEach(function (c) {\n    Object.defineProperty(a, c, Object.getOwnPropertyDescriptor(b, c));\n  });\n\n  return a;\n}\n\nimport React, { useCallback, useEffect, useRef } from \"react\";\nimport { useAnnotation, useStore } from \"../../../hooks\";\nimport { TOOLS_IDS } from \"../../../utils/constants\";\nimport AnnotationOptions from \"../../common/AnnotationOptions\";\nimport getPointerOffsetPositionBoundedToObject from \"../../../utils/getPointerOffsetPositionBoundedToObject\";\nimport randomId from \"../../../utils/randomId\";\nimport { SELECT_ANNOTATION, SET_ANNOTATION } from \"../../../actions\";\nimport getElemDocumentCoords from \"../../../utils/getElemDocumentCoords\";\n\nvar eventsOptions = {\n  passive: !0\n},\n    PenOptions = function (a) {\n  var b = a.t,\n      c = useStore(),\n      d = c.dispatch,\n      e = c.designLayer,\n      f = c.previewGroup,\n      g = c.config,\n      h = useAnnotation(_objectSpread(_objectSpread(_objectSpread({}, g.annotationsCommon), g[TOOLS_IDS.PEN]), {}, {\n    name: TOOLS_IDS.PEN\n  }), !1),\n      i = _slicedToArray(h, 3),\n      j = i[0],\n      k = i[1],\n      l = i[2],\n      m = useRef(null),\n      n = useRef({\n    points: [],\n    moved: !1,\n    id: \"\"\n  }),\n      o = useCallback(function () {\n    var a = getElemDocumentCoords(m.current.content),\n        b = getPointerOffsetPositionBoundedToObject(f, a);\n    return [b.offsetX - (e.attrs.xPadding || 0), b.offsetY - (e.attrs.yPadding || 0)];\n  }, []),\n      p = useCallback(function () {\n    n.current.moved ? (n.current.points = n.current.points.concat(o()), d({\n      type: SET_ANNOTATION,\n      payload: {\n        id: n.current.id,\n        points: n.current.points,\n        dismissHistory: !0\n      }\n    })) : (n.current = {\n      moved: !0,\n      id: randomId(TOOLS_IDS.PEN),\n      points: [].concat(_toConsumableArray(n.current.points), _toConsumableArray(o()))\n    }, l({\n      id: n.current.id,\n      name: TOOLS_IDS.PEN,\n      points: n.current.points\n    }));\n  }, []),\n      q = useCallback(function () {\n    n.current.id && d({\n      type: SELECT_ANNOTATION,\n      payload: {\n        annotationId: n.current.id\n      }\n    }), n.current = null, m.current.off(\"mousemove touchmove\", p), m.current.off(\"mouseleave touchcancel\", q), document.removeEventListener(\"mouseup\", q, eventsOptions), document.removeEventListener(\"touchend\", q, eventsOptions), document.removeEventListener(\"mouseleave\", q, eventsOptions), document.removeEventListener(\"touchcancel\", q, eventsOptions);\n  }, []),\n      r = useCallback(function (a) {\n    a.target.attrs.draggable || (a.evt.preventDefault(), n.current = {\n      points: o()\n    }, m.current.on(\"mousemove touchmove\", p), m.current.on(\"mouseleave touchcancel\", q), document.addEventListener(\"mouseup\", q, eventsOptions), document.addEventListener(\"touchend\", q, eventsOptions), document.addEventListener(\"mouseleave\", q, eventsOptions), document.addEventListener(\"touchcancel\", q, eventsOptions));\n  }, []);\n\n  return useEffect(function () {\n    return m.current = null === e || void 0 === e ? void 0 : e.getStage(), m.current && m.current.on(\"mousedown touchstart\", r), function () {\n      m.current && m.current.off(\"mousedown touchstart\", r);\n    };\n  }, []), React.createElement(AnnotationOptions, {\n    className: \"FIE_pen-tool-options\",\n    annotation: j,\n    updateAnnotation: k,\n    t: b,\n    hidePositionField: !0,\n    hideFillOption: !0\n  });\n};\n\nexport default PenOptions;","map":{"version":3,"sources":["/Users/devusama/Work/FYP_FrontEnd/node_modules/react-filerobot-image-editor/lib/components/tools/Pen/PenOptions.js"],"names":["_toConsumableArray","_defineProperty","_slicedToArray","ownKeys","a","b","c","Object","keys","getOwnPropertySymbols","d","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","React","useCallback","useEffect","useRef","useAnnotation","useStore","TOOLS_IDS","AnnotationOptions","getPointerOffsetPositionBoundedToObject","randomId","SELECT_ANNOTATION","SET_ANNOTATION","getElemDocumentCoords","eventsOptions","passive","PenOptions","t","dispatch","e","designLayer","f","previewGroup","g","config","h","annotationsCommon","PEN","name","i","j","k","l","m","n","points","moved","id","o","current","content","offsetX","attrs","xPadding","offsetY","yPadding","p","concat","type","payload","dismissHistory","q","annotationId","off","document","removeEventListener","r","target","draggable","evt","preventDefault","on","addEventListener","getStage","createElement","className","annotation","updateAnnotation","hidePositionField","hideFillOption"],"mappings":"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","sourcesContent":["import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}import React,{useCallback,useEffect,useRef}from\"react\";import{useAnnotation,useStore}from\"../../../hooks\";import{TOOLS_IDS}from\"../../../utils/constants\";import AnnotationOptions from\"../../common/AnnotationOptions\";import getPointerOffsetPositionBoundedToObject from\"../../../utils/getPointerOffsetPositionBoundedToObject\";import randomId from\"../../../utils/randomId\";import{SELECT_ANNOTATION,SET_ANNOTATION}from\"../../../actions\";import getElemDocumentCoords from\"../../../utils/getElemDocumentCoords\";var eventsOptions={passive:!0},PenOptions=function(a){var b=a.t,c=useStore(),d=c.dispatch,e=c.designLayer,f=c.previewGroup,g=c.config,h=useAnnotation(_objectSpread(_objectSpread(_objectSpread({},g.annotationsCommon),g[TOOLS_IDS.PEN]),{},{name:TOOLS_IDS.PEN}),!1),i=_slicedToArray(h,3),j=i[0],k=i[1],l=i[2],m=useRef(null),n=useRef({points:[],moved:!1,id:\"\"}),o=useCallback(function(){var a=getElemDocumentCoords(m.current.content),b=getPointerOffsetPositionBoundedToObject(f,a);return[b.offsetX-(e.attrs.xPadding||0),b.offsetY-(e.attrs.yPadding||0)]},[]),p=useCallback(function(){n.current.moved?(n.current.points=n.current.points.concat(o()),d({type:SET_ANNOTATION,payload:{id:n.current.id,points:n.current.points,dismissHistory:!0}})):(n.current={moved:!0,id:randomId(TOOLS_IDS.PEN),points:[].concat(_toConsumableArray(n.current.points),_toConsumableArray(o()))},l({id:n.current.id,name:TOOLS_IDS.PEN,points:n.current.points}))},[]),q=useCallback(function(){n.current.id&&d({type:SELECT_ANNOTATION,payload:{annotationId:n.current.id}}),n.current=null,m.current.off(\"mousemove touchmove\",p),m.current.off(\"mouseleave touchcancel\",q),document.removeEventListener(\"mouseup\",q,eventsOptions),document.removeEventListener(\"touchend\",q,eventsOptions),document.removeEventListener(\"mouseleave\",q,eventsOptions),document.removeEventListener(\"touchcancel\",q,eventsOptions)},[]),r=useCallback(function(a){a.target.attrs.draggable||(a.evt.preventDefault(),n.current={points:o()},m.current.on(\"mousemove touchmove\",p),m.current.on(\"mouseleave touchcancel\",q),document.addEventListener(\"mouseup\",q,eventsOptions),document.addEventListener(\"touchend\",q,eventsOptions),document.addEventListener(\"mouseleave\",q,eventsOptions),document.addEventListener(\"touchcancel\",q,eventsOptions))},[]);return useEffect(function(){return m.current=null===e||void 0===e?void 0:e.getStage(),m.current&&m.current.on(\"mousedown touchstart\",r),function(){m.current&&m.current.off(\"mousedown touchstart\",r)}},[]),React.createElement(AnnotationOptions,{className:\"FIE_pen-tool-options\",annotation:j,updateAnnotation:k,t:b,hidePositionField:!0,hideFillOption:!0})};export default PenOptions;"]},"metadata":{},"sourceType":"module"}