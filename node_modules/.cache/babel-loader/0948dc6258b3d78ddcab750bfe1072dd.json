{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"defaultColor\", \"onChange\", \"pinnedColors\", \"showTransparentColor\"];\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\n\n/* eslint-disable @typescript-eslint/no-unnecessary-condition */\n\n/* eslint-disable no-constant-condition */\n\n/* eslint-disable react/no-array-index-key */\n\n/* eslint-disable sonarjs/cognitive-complexity */\n\n/* eslint-disable id-length */\n\n\nimport React, { useState, useMemo, useEffect } from 'react';\nimport PT from 'prop-types';\nimport { PinOutline, DeleteOutline } from '@scaleflex/icons';\nimport Select from '../select';\nimport MenuItem from '../menu-item';\nimport Input from '../input';\nimport useDrag from '../../hooks/use-drag';\nimport { intrinsicComponent, colorToHsl, hexToRgb, hslToHex, hslToHsv, hsvToHsl, restrictNumber, mapNumber, colorToHex, getElemDocumentCoords, rgbToHex, validateHex, rgbStringToArray } from '../../utils/functions';\nimport Styled from './color-picker.styles';\nimport ColorItem from './color-item.component';\nvar transparentColor = ['rgba(0,0,0,0)'];\nvar transparentColorHex = '#00000000';\nvar colorsHuesCount = 360;\nvar ColorPicker = intrinsicComponent(function (_ref, ref) {\n  var _ref$defaultColor = _ref.defaultColor,\n      defaultColor = _ref$defaultColor === void 0 ? '#000000' : _ref$defaultColor,\n      onChange = _ref.onChange,\n      _ref$pinnedColors = _ref.pinnedColors,\n      pinnedColors = _ref$pinnedColors === void 0 ? [] : _ref$pinnedColors,\n      _ref$showTransparentC = _ref.showTransparentColor,\n      showTransparentColor = _ref$showTransparentC === void 0 ? false : _ref$showTransparentC,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var showedColors = showTransparentColor ? transparentColor.concat(pinnedColors) : pinnedColors;\n\n  var isTransparentColor = function isTransparentColor(color) {\n    return color === transparentColorHex || color === transparentColor[0];\n  };\n\n  var _useState = useState({\n    color: '#ff0000',\n    pointerLeft: 0\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      bar = _useState2[0],\n      setBar = _useState2[1];\n\n  var _useState3 = useState({\n    color: isTransparentColor(defaultColor) ? '#00000000' : colorToHex(defaultColor) || '#000000',\n    pointer: {\n      left: 0,\n      top: 0\n    }\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      rangePicker = _useState4[0],\n      setRangePicker = _useState4[1];\n\n  var _useState5 = useState(showedColors),\n      _useState6 = _slicedToArray(_useState5, 2),\n      localPinnedColors = _useState6[0],\n      setLocalPinnedColors = _useState6[1];\n\n  var _useState7 = useState('hex'),\n      _useState8 = _slicedToArray(_useState7, 2),\n      inputType = _useState8[0],\n      setInputType = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      rgbColorValue = _useState10[0],\n      setRgbColorValue = _useState10[1];\n\n  var _useState11 = useState(colorToHex(rangePicker.color)),\n      _useState12 = _slicedToArray(_useState11, 2),\n      hexInputValue = _useState12[0],\n      setHexInputValue = _useState12[1];\n\n  var _useState13 = useState(null),\n      _useState14 = _slicedToArray(_useState13, 2),\n      barRef = _useState14[0],\n      setBarRef = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      rangePickerRef = _useState16[0],\n      setRangePickerRef = _useState16[1];\n\n  var isColorChecked = function isColorChecked(checkedColor) {\n    if (checkedColor === transparentColor[0] && rangePicker.color === transparentColorHex) {\n      return true;\n    }\n\n    return checkedColor === rangePicker.color;\n  };\n\n  var filterTransparentColor = function filterTransparentColor(colors) {\n    return colors.filter(function (item) {\n      return item !== 'rgba(0,0,0,0)';\n    });\n  };\n\n  var getRgbColor = function getRgbColor(color) {\n    return isTransparentColor(color) ? transparentColor[0] : \"rgb(\".concat(hexToRgb(color).join(', '), \")\");\n  };\n\n  var handlePinnedColors = function handlePinnedColors(hexColor, type) {\n    if (type === 'add') {\n      var newLocalPinnedColors = [].concat(_toConsumableArray(localPinnedColors), [hexColor]);\n      setLocalPinnedColors(newLocalPinnedColors);\n\n      if (typeof onChange === 'function') {\n        onChange(rangePicker.color, getRgbColor(hexColor), filterTransparentColor(newLocalPinnedColors));\n      }\n    } else {\n      var _newLocalPinnedColors = localPinnedColors.filter(function (item) {\n        return item !== rangePicker.color;\n      });\n\n      setLocalPinnedColors(_newLocalPinnedColors);\n\n      if (typeof onChange === 'function') {\n        onChange(rangePicker.color, getRgbColor(hexColor), filterTransparentColor(_newLocalPinnedColors));\n      }\n    }\n  };\n\n  var changeBarPosByColor = function changeBarPosByColor(color) {\n    if (barRef !== null) {\n      var _ref2 = getElemDocumentCoords(barRef),\n          left = _ref2.left;\n\n      var _colorToHsl = colorToHsl(color || rangePicker.color),\n          _colorToHsl2 = _slicedToArray(_colorToHsl, 1),\n          h = _colorToHsl2[0];\n\n      var targetColorElem = barRef.querySelector(\"[data-hue='\".concat(h, \"']\"));\n\n      if (targetColorElem !== null) {\n        var targetColorRgb = targetColorElem.style.backgroundColor || bar.color;\n        setBar({\n          color: targetColorRgb,\n          pointerLeft: getElemDocumentCoords(targetColorElem).left - left || bar.pointerLeft\n        });\n      }\n    }\n  };\n\n  var handleRgbInput = function handleRgbInput(value, index) {\n    if (value > 255 || Number.isNaN(value)) {\n      return;\n    }\n\n    var rgbArr = rgbColorValue;\n    rgbArr[index] = value;\n    var newHexColor = rgbToHex.apply(void 0, _toConsumableArray(rgbArr));\n    setRgbColorValue(_toConsumableArray(rgbArr));\n\n    if (validateHex(newHexColor)) {\n      setRangePicker(_objectSpread(_objectSpread({}, rangePicker), {}, {\n        color: newHexColor\n      }));\n      changeBarPosByColor(newHexColor);\n    }\n  };\n\n  var updateRgb = function updateRgb(color) {\n    if (color.includes('rgb')) {\n      setRgbColorValue(rgbStringToArray(color));\n    } else {\n      setRgbColorValue(hexToRgb(color));\n    }\n  };\n\n  var getHexColor = function getHexColor(color) {\n    return isTransparentColor(color) ? transparentColorHex : color;\n  };\n\n  var changeRangePickerPointerPosByColor = function changeRangePickerPointerPosByColor(color) {\n    if (rangePickerRef !== null) {\n      var _ref3 = getElemDocumentCoords(rangePickerRef),\n          width = _ref3.width,\n          height = _ref3.height;\n\n      var colorHsl = colorToHsl(color);\n      var colorHsv = hslToHsv(colorHsl[0], colorHsl[1] / 100, colorHsl[2] / 100);\n      var left = mapNumber(colorHsv[1], 0, 100, 0, width);\n      var top = height - mapNumber(colorHsv[2], 0, 100, 0, height);\n      setRangePicker({\n        color: getHexColor(color),\n        pointer: {\n          left: left,\n          top: top\n        }\n      });\n      changeBarPosByColor(color);\n      updateRgb(color);\n\n      if (typeof onChange === 'function') {\n        onChange(getHexColor(color), getRgbColor(color), filterTransparentColor(localPinnedColors));\n      }\n    }\n  };\n\n  var changeRangePickerColorByPosition = function changeRangePickerColorByPosition(left, top, barColor) {\n    if (rangePickerRef !== null) {\n      var _ref4 = getElemDocumentCoords(rangePickerRef),\n          width = _ref4.width,\n          height = _ref4.height;\n\n      var _colorToHsl3 = colorToHsl(barColor),\n          _colorToHsl4 = _slicedToArray(_colorToHsl3, 1),\n          barColorHue = _colorToHsl4[0];\n\n      var restrictedLeft = restrictNumber(left, 0, width) || 0;\n      var restrictedTop = restrictNumber(top, 0, height) || 0;\n      var hsl = hsvToHsl(barColorHue, restrictedLeft / width, (height - restrictedTop) / height);\n      var hexColor = hslToHex(hsl[0], hsl[1], hsl[2]);\n      setRangePicker({\n        color: hexColor,\n        pointer: {\n          left: restrictedLeft,\n          top: restrictedTop\n        }\n      });\n\n      if (typeof onChange === 'function') {\n        onChange(hexColor, \"rgb(\".concat(hexToRgb(hexColor).join(', '), \")\"), filterTransparentColor(localPinnedColors));\n      }\n    }\n  };\n\n  var changeBarColorByPosition = function changeBarColorByPosition(pointerLeft) {\n    var barElem = barRef;\n\n    if (barElem !== null) {\n      var _ref5 = getElemDocumentCoords(barElem),\n          width = _ref5.width;\n\n      var mappedPointerLeft = restrictNumber(Math.round(mapNumber(pointerLeft, 0, width, 0, colorsHuesCount)), 0, colorsHuesCount);\n      var targetColorElem = barElem.querySelector(\"[data-hue='\".concat(mappedPointerLeft, \"']\"));\n      var targetColorRgb = targetColorElem.style.backgroundColor;\n      setBar({\n        color: targetColorRgb,\n        pointerLeft: restrictNumber(pointerLeft, 0, width)\n      });\n      return targetColorRgb;\n    }\n\n    return bar.color;\n  };\n\n  var updateBarColor = function updateBarColor(e) {\n    var barElem = barRef;\n\n    if (barElem !== null) {\n      var _e$touches;\n\n      var _ref6 = getElemDocumentCoords(barElem),\n          left = _ref6.left;\n\n      var pointerEvent = ((_e$touches = e.touches) === null || _e$touches === void 0 ? void 0 : _e$touches[0]) || e;\n      var barColor = changeBarColorByPosition(pointerEvent.pageX - left);\n      changeRangePickerColorByPosition(rangePicker.pointer.left, rangePicker.pointer.top, barColor);\n    }\n  };\n\n  var updateRangePickerColor = function updateRangePickerColor(e) {\n    var rangePickerElem = rangePickerRef;\n\n    if (rangePickerElem !== null) {\n      var _ref7 = getElemDocumentCoords(rangePickerElem),\n          left = _ref7.left,\n          top = _ref7.top,\n          height = _ref7.height,\n          width = _ref7.width;\n\n      var pointerLeft = e ? restrictNumber(e.pageX - left, 0, width) : rangePicker.pointer.left || 0;\n      var pointerTop = e ? restrictNumber(e.pageY - top, 0, height) : rangePicker.pointer.left || 0;\n      changeRangePickerColorByPosition(pointerLeft, pointerTop, bar.color);\n    }\n  };\n\n  var moveBarPointerByArrows = function moveBarPointerByArrows(e) {\n    if (e.key !== 'ArrowLeft' && e.key !== 'ArrowRight') {\n      return;\n    }\n\n    changeBarColorByPosition(bar.pointerLeft + (e.key === 'ArrowLeft' ? -1 : 1));\n  };\n\n  var moveRangePickerPointerByArrows = function moveRangePickerPointerByArrows(e) {\n    var currentDirection = 0;\n\n    if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {\n      currentDirection = -1;\n    } else if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {\n      currentDirection = 1;\n    }\n\n    if (currentDirection) {\n      changeRangePickerColorByPosition((rangePicker.pointer.left || 0) + (['ArrowLeft', 'ArrowRight'].includes(e.key) ? currentDirection : 0), (rangePicker.pointer.top || 0) + (['ArrowUp', 'ArrowDown'].includes(e.key) ? currentDirection : 0), bar.color);\n    }\n  };\n\n  var validateHexAndUpdate = function validateHexAndUpdate(color) {\n    var testHex = validateHex(color);\n\n    if (testHex) {\n      changeRangePickerPointerPosByColor(color);\n    }\n\n    setHexInputValue(color);\n  };\n\n  useEffect(function () {\n    changeBarPosByColor(rangePicker.color);\n    changeRangePickerPointerPosByColor(rangePicker.color);\n  }, [barRef]);\n  useEffect(function () {\n    setHexInputValue(rangePicker.color);\n    updateRgb(rangePicker.color);\n  }, [rangePicker.color]);\n  var barColors = useMemo(function () {\n    return _toConsumableArray(new Array(colorsHuesCount + 1)).map(function (_, h) {\n      return /*#__PURE__*/React.createElement(Styled.BarColorStop, {\n        key: h,\n        $color: \"hsl(\".concat(h, \", 100%, 50%)\"),\n        \"data-hue\": h\n      });\n    });\n  }, []);\n  var barPointSliding = useDrag(updateBarColor, updateBarColor, null);\n  var rangePickerPointSliding = useDrag(updateRangePickerColor, updateRangePickerColor, null);\n  return /*#__PURE__*/React.createElement(Styled.ColorPickerWrapper, _extends({\n    ref: ref\n  }, rest), /*#__PURE__*/React.createElement(Styled.RangePickerWrapper, _extends({\n    ref: setRangePickerRef,\n    color: bar.color\n  }, rangePickerPointSliding), /*#__PURE__*/React.createElement(Styled.WhiteGradient, null), /*#__PURE__*/React.createElement(Styled.BlackGradient, null), /*#__PURE__*/React.createElement(Styled.ColorPointer, {\n    tabIndex: -1,\n    left: rangePicker.pointer.left || 0,\n    top: rangePicker.pointer.top || 0,\n    onKeyDown: moveRangePickerPointerByArrows,\n    considerTopWidth: true\n  })), /*#__PURE__*/React.createElement(Styled.BarWrapper, barPointSliding, /*#__PURE__*/React.createElement(Styled.Bar, {\n    ref: setBarRef\n  }, /*#__PURE__*/React.createElement(\"tbody\", null, /*#__PURE__*/React.createElement(\"tr\", null, barColors))), /*#__PURE__*/React.createElement(Styled.ColorPointer, {\n    tabIndex: -1,\n    left: bar.pointerLeft,\n    onKeyDown: moveBarPointerByArrows,\n    considerTopWidth: false,\n    style: {\n      top: -3\n    }\n  })), /*#__PURE__*/React.createElement(Styled.ColorItemsContainer, null, localPinnedColors.map(function (color) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"item\",\n      key: color\n    }, /*#__PURE__*/React.createElement(ColorItem, {\n      value: color,\n      checked: isColorChecked(color),\n      onChange: function onChange(ev) {\n        return changeRangePickerPointerPosByColor(ev.target.value);\n      }\n    }));\n  })), /*#__PURE__*/React.createElement(Styled.ColorPickerAction, null, /*#__PURE__*/React.createElement(Styled.Select, {\n    value: inputType\n  }, /*#__PURE__*/React.createElement(Select, {\n    size: \"sm\",\n    value: inputType,\n    MenuProps: {\n      zIndex: 11112\n    },\n    onChange: function onChange(ev) {\n      return setInputType(ev);\n    },\n    fullWidth: true\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"hex\"\n  }, \"Hex\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"rgb\"\n  }, \"RGB\"))), inputType === 'hex' ? /*#__PURE__*/React.createElement(Input, {\n    size: \"sm\",\n    error: !/^#([\\da-f]{3}){1,2}$/i.test(rangePicker.color),\n    value: hexInputValue,\n    onChange: function onChange(e) {\n      return validateHexAndUpdate(e.target.value);\n    },\n    style: {\n      width: '45%'\n    }\n  }) : rgbColorValue.map(function (rgb, index) {\n    return /*#__PURE__*/React.createElement(Input // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: index,\n      size: \"sm\",\n      value: rgb,\n      onChange: function onChange(e) {\n        var _e$target;\n\n        return handleRgbInput(Number((_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.value), index);\n      },\n      style: {\n        width: '20%'\n      }\n    });\n  }), rangePicker.color !== transparentColorHex && /*#__PURE__*/React.createElement(Styled.ColorPickerIcon, {\n    onClick: function onClick() {\n      return localPinnedColors.some(function (checkedColor) {\n        return isColorChecked(checkedColor);\n      }) ? handlePinnedColors(rangePicker.color, 'delete') : handlePinnedColors(rangePicker.color, 'add');\n    }\n  }, localPinnedColors.some(function (checkedColor) {\n    return isColorChecked(checkedColor);\n  }) ? /*#__PURE__*/React.createElement(DeleteOutline, null) : /*#__PURE__*/React.createElement(PinOutline, null))));\n});\nColorPicker.defaultProps = {\n  defaultColor: '#000000',\n  pinnedColors: [],\n  showTransparentColor: false\n};\nColorPicker.propTypes = {\n  defaultColor: PT.string,\n  onChange: PT.func,\n  // eslint-disable-next-line react/forbid-prop-types\n  pinnedColors: PT.array,\n  showTransparentColor: PT.bool\n};\nexport default ColorPicker;","map":{"version":3,"sources":["/Users/devusama/Work/FYP_FrontEnd/node_modules/react-filerobot-image-editor/node_modules/@scaleflex/ui/core/color-picker/color-picker.component.js"],"names":["_extends","_defineProperty","_toConsumableArray","_slicedToArray","_objectWithoutProperties","_excluded","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","React","useState","useMemo","useEffect","PT","PinOutline","DeleteOutline","Select","MenuItem","Input","useDrag","intrinsicComponent","colorToHsl","hexToRgb","hslToHex","hslToHsv","hsvToHsl","restrictNumber","mapNumber","colorToHex","getElemDocumentCoords","rgbToHex","validateHex","rgbStringToArray","Styled","ColorItem","transparentColor","transparentColorHex","colorsHuesCount","ColorPicker","_ref","ref","_ref$defaultColor","defaultColor","onChange","_ref$pinnedColors","pinnedColors","_ref$showTransparentC","showTransparentColor","rest","showedColors","concat","isTransparentColor","color","_useState","pointerLeft","_useState2","bar","setBar","_useState3","pointer","left","top","_useState4","rangePicker","setRangePicker","_useState5","_useState6","localPinnedColors","setLocalPinnedColors","_useState7","_useState8","inputType","setInputType","_useState9","_useState10","rgbColorValue","setRgbColorValue","_useState11","_useState12","hexInputValue","setHexInputValue","_useState13","_useState14","barRef","setBarRef","_useState15","_useState16","rangePickerRef","setRangePickerRef","isColorChecked","checkedColor","filterTransparentColor","colors","item","getRgbColor","join","handlePinnedColors","hexColor","type","newLocalPinnedColors","_newLocalPinnedColors","changeBarPosByColor","_ref2","_colorToHsl","_colorToHsl2","h","targetColorElem","querySelector","targetColorRgb","style","backgroundColor","handleRgbInput","value","index","Number","isNaN","rgbArr","newHexColor","updateRgb","includes","getHexColor","changeRangePickerPointerPosByColor","_ref3","width","height","colorHsl","colorHsv","changeRangePickerColorByPosition","barColor","_ref4","_colorToHsl3","_colorToHsl4","barColorHue","restrictedLeft","restrictedTop","hsl","changeBarColorByPosition","barElem","_ref5","mappedPointerLeft","Math","round","updateBarColor","e","_e$touches","_ref6","pointerEvent","touches","pageX","updateRangePickerColor","rangePickerElem","_ref7","pointerTop","pageY","moveBarPointerByArrows","moveRangePickerPointerByArrows","currentDirection","validateHexAndUpdate","testHex","barColors","Array","map","_","createElement","BarColorStop","$color","barPointSliding","rangePickerPointSliding","ColorPickerWrapper","RangePickerWrapper","WhiteGradient","BlackGradient","ColorPointer","tabIndex","onKeyDown","considerTopWidth","BarWrapper","Bar","ColorItemsContainer","className","checked","ev","ColorPickerAction","size","MenuProps","zIndex","fullWidth","error","test","rgb","_e$target","ColorPickerIcon","onClick","some","defaultProps","propTypes","string","func","array","bool"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"defaultColor\", \"onChange\", \"pinnedColors\", \"showTransparentColor\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\n\n/* eslint-disable @typescript-eslint/no-unnecessary-condition */\n\n/* eslint-disable no-constant-condition */\n\n/* eslint-disable react/no-array-index-key */\n\n/* eslint-disable sonarjs/cognitive-complexity */\n\n/* eslint-disable id-length */\nimport React, { useState, useMemo, useEffect } from 'react';\nimport PT from 'prop-types';\nimport { PinOutline, DeleteOutline } from '@scaleflex/icons';\nimport Select from '../select';\nimport MenuItem from '../menu-item';\nimport Input from '../input';\nimport useDrag from '../../hooks/use-drag';\nimport { intrinsicComponent, colorToHsl, hexToRgb, hslToHex, hslToHsv, hsvToHsl, restrictNumber, mapNumber, colorToHex, getElemDocumentCoords, rgbToHex, validateHex, rgbStringToArray } from '../../utils/functions';\nimport Styled from './color-picker.styles';\nimport ColorItem from './color-item.component';\nvar transparentColor = ['rgba(0,0,0,0)'];\nvar transparentColorHex = '#00000000';\nvar colorsHuesCount = 360;\nvar ColorPicker = intrinsicComponent(function (_ref, ref) {\n  var _ref$defaultColor = _ref.defaultColor,\n      defaultColor = _ref$defaultColor === void 0 ? '#000000' : _ref$defaultColor,\n      onChange = _ref.onChange,\n      _ref$pinnedColors = _ref.pinnedColors,\n      pinnedColors = _ref$pinnedColors === void 0 ? [] : _ref$pinnedColors,\n      _ref$showTransparentC = _ref.showTransparentColor,\n      showTransparentColor = _ref$showTransparentC === void 0 ? false : _ref$showTransparentC,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var showedColors = showTransparentColor ? transparentColor.concat(pinnedColors) : pinnedColors;\n\n  var isTransparentColor = function isTransparentColor(color) {\n    return color === transparentColorHex || color === transparentColor[0];\n  };\n\n  var _useState = useState({\n    color: '#ff0000',\n    pointerLeft: 0\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      bar = _useState2[0],\n      setBar = _useState2[1];\n\n  var _useState3 = useState({\n    color: isTransparentColor(defaultColor) ? '#00000000' : colorToHex(defaultColor) || '#000000',\n    pointer: {\n      left: 0,\n      top: 0\n    }\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      rangePicker = _useState4[0],\n      setRangePicker = _useState4[1];\n\n  var _useState5 = useState(showedColors),\n      _useState6 = _slicedToArray(_useState5, 2),\n      localPinnedColors = _useState6[0],\n      setLocalPinnedColors = _useState6[1];\n\n  var _useState7 = useState('hex'),\n      _useState8 = _slicedToArray(_useState7, 2),\n      inputType = _useState8[0],\n      setInputType = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      rgbColorValue = _useState10[0],\n      setRgbColorValue = _useState10[1];\n\n  var _useState11 = useState(colorToHex(rangePicker.color)),\n      _useState12 = _slicedToArray(_useState11, 2),\n      hexInputValue = _useState12[0],\n      setHexInputValue = _useState12[1];\n\n  var _useState13 = useState(null),\n      _useState14 = _slicedToArray(_useState13, 2),\n      barRef = _useState14[0],\n      setBarRef = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      rangePickerRef = _useState16[0],\n      setRangePickerRef = _useState16[1];\n\n  var isColorChecked = function isColorChecked(checkedColor) {\n    if (checkedColor === transparentColor[0] && rangePicker.color === transparentColorHex) {\n      return true;\n    }\n\n    return checkedColor === rangePicker.color;\n  };\n\n  var filterTransparentColor = function filterTransparentColor(colors) {\n    return colors.filter(function (item) {\n      return item !== 'rgba(0,0,0,0)';\n    });\n  };\n\n  var getRgbColor = function getRgbColor(color) {\n    return isTransparentColor(color) ? transparentColor[0] : \"rgb(\".concat(hexToRgb(color).join(', '), \")\");\n  };\n\n  var handlePinnedColors = function handlePinnedColors(hexColor, type) {\n    if (type === 'add') {\n      var newLocalPinnedColors = [].concat(_toConsumableArray(localPinnedColors), [hexColor]);\n      setLocalPinnedColors(newLocalPinnedColors);\n\n      if (typeof onChange === 'function') {\n        onChange(rangePicker.color, getRgbColor(hexColor), filterTransparentColor(newLocalPinnedColors));\n      }\n    } else {\n      var _newLocalPinnedColors = localPinnedColors.filter(function (item) {\n        return item !== rangePicker.color;\n      });\n\n      setLocalPinnedColors(_newLocalPinnedColors);\n\n      if (typeof onChange === 'function') {\n        onChange(rangePicker.color, getRgbColor(hexColor), filterTransparentColor(_newLocalPinnedColors));\n      }\n    }\n  };\n\n  var changeBarPosByColor = function changeBarPosByColor(color) {\n    if (barRef !== null) {\n      var _ref2 = getElemDocumentCoords(barRef),\n          left = _ref2.left;\n\n      var _colorToHsl = colorToHsl(color || rangePicker.color),\n          _colorToHsl2 = _slicedToArray(_colorToHsl, 1),\n          h = _colorToHsl2[0];\n\n      var targetColorElem = barRef.querySelector(\"[data-hue='\".concat(h, \"']\"));\n\n      if (targetColorElem !== null) {\n        var targetColorRgb = targetColorElem.style.backgroundColor || bar.color;\n        setBar({\n          color: targetColorRgb,\n          pointerLeft: getElemDocumentCoords(targetColorElem).left - left || bar.pointerLeft\n        });\n      }\n    }\n  };\n\n  var handleRgbInput = function handleRgbInput(value, index) {\n    if (value > 255 || Number.isNaN(value)) {\n      return;\n    }\n\n    var rgbArr = rgbColorValue;\n    rgbArr[index] = value;\n    var newHexColor = rgbToHex.apply(void 0, _toConsumableArray(rgbArr));\n    setRgbColorValue(_toConsumableArray(rgbArr));\n\n    if (validateHex(newHexColor)) {\n      setRangePicker(_objectSpread(_objectSpread({}, rangePicker), {}, {\n        color: newHexColor\n      }));\n      changeBarPosByColor(newHexColor);\n    }\n  };\n\n  var updateRgb = function updateRgb(color) {\n    if (color.includes('rgb')) {\n      setRgbColorValue(rgbStringToArray(color));\n    } else {\n      setRgbColorValue(hexToRgb(color));\n    }\n  };\n\n  var getHexColor = function getHexColor(color) {\n    return isTransparentColor(color) ? transparentColorHex : color;\n  };\n\n  var changeRangePickerPointerPosByColor = function changeRangePickerPointerPosByColor(color) {\n    if (rangePickerRef !== null) {\n      var _ref3 = getElemDocumentCoords(rangePickerRef),\n          width = _ref3.width,\n          height = _ref3.height;\n\n      var colorHsl = colorToHsl(color);\n      var colorHsv = hslToHsv(colorHsl[0], colorHsl[1] / 100, colorHsl[2] / 100);\n      var left = mapNumber(colorHsv[1], 0, 100, 0, width);\n      var top = height - mapNumber(colorHsv[2], 0, 100, 0, height);\n      setRangePicker({\n        color: getHexColor(color),\n        pointer: {\n          left: left,\n          top: top\n        }\n      });\n      changeBarPosByColor(color);\n      updateRgb(color);\n\n      if (typeof onChange === 'function') {\n        onChange(getHexColor(color), getRgbColor(color), filterTransparentColor(localPinnedColors));\n      }\n    }\n  };\n\n  var changeRangePickerColorByPosition = function changeRangePickerColorByPosition(left, top, barColor) {\n    if (rangePickerRef !== null) {\n      var _ref4 = getElemDocumentCoords(rangePickerRef),\n          width = _ref4.width,\n          height = _ref4.height;\n\n      var _colorToHsl3 = colorToHsl(barColor),\n          _colorToHsl4 = _slicedToArray(_colorToHsl3, 1),\n          barColorHue = _colorToHsl4[0];\n\n      var restrictedLeft = restrictNumber(left, 0, width) || 0;\n      var restrictedTop = restrictNumber(top, 0, height) || 0;\n      var hsl = hsvToHsl(barColorHue, restrictedLeft / width, (height - restrictedTop) / height);\n      var hexColor = hslToHex(hsl[0], hsl[1], hsl[2]);\n      setRangePicker({\n        color: hexColor,\n        pointer: {\n          left: restrictedLeft,\n          top: restrictedTop\n        }\n      });\n\n      if (typeof onChange === 'function') {\n        onChange(hexColor, \"rgb(\".concat(hexToRgb(hexColor).join(', '), \")\"), filterTransparentColor(localPinnedColors));\n      }\n    }\n  };\n\n  var changeBarColorByPosition = function changeBarColorByPosition(pointerLeft) {\n    var barElem = barRef;\n\n    if (barElem !== null) {\n      var _ref5 = getElemDocumentCoords(barElem),\n          width = _ref5.width;\n\n      var mappedPointerLeft = restrictNumber(Math.round(mapNumber(pointerLeft, 0, width, 0, colorsHuesCount)), 0, colorsHuesCount);\n      var targetColorElem = barElem.querySelector(\"[data-hue='\".concat(mappedPointerLeft, \"']\"));\n      var targetColorRgb = targetColorElem.style.backgroundColor;\n      setBar({\n        color: targetColorRgb,\n        pointerLeft: restrictNumber(pointerLeft, 0, width)\n      });\n      return targetColorRgb;\n    }\n\n    return bar.color;\n  };\n\n  var updateBarColor = function updateBarColor(e) {\n    var barElem = barRef;\n\n    if (barElem !== null) {\n      var _e$touches;\n\n      var _ref6 = getElemDocumentCoords(barElem),\n          left = _ref6.left;\n\n      var pointerEvent = ((_e$touches = e.touches) === null || _e$touches === void 0 ? void 0 : _e$touches[0]) || e;\n      var barColor = changeBarColorByPosition(pointerEvent.pageX - left);\n      changeRangePickerColorByPosition(rangePicker.pointer.left, rangePicker.pointer.top, barColor);\n    }\n  };\n\n  var updateRangePickerColor = function updateRangePickerColor(e) {\n    var rangePickerElem = rangePickerRef;\n\n    if (rangePickerElem !== null) {\n      var _ref7 = getElemDocumentCoords(rangePickerElem),\n          left = _ref7.left,\n          top = _ref7.top,\n          height = _ref7.height,\n          width = _ref7.width;\n\n      var pointerLeft = e ? restrictNumber(e.pageX - left, 0, width) : rangePicker.pointer.left || 0;\n      var pointerTop = e ? restrictNumber(e.pageY - top, 0, height) : rangePicker.pointer.left || 0;\n      changeRangePickerColorByPosition(pointerLeft, pointerTop, bar.color);\n    }\n  };\n\n  var moveBarPointerByArrows = function moveBarPointerByArrows(e) {\n    if (e.key !== 'ArrowLeft' && e.key !== 'ArrowRight') {\n      return;\n    }\n\n    changeBarColorByPosition(bar.pointerLeft + (e.key === 'ArrowLeft' ? -1 : 1));\n  };\n\n  var moveRangePickerPointerByArrows = function moveRangePickerPointerByArrows(e) {\n    var currentDirection = 0;\n\n    if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {\n      currentDirection = -1;\n    } else if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {\n      currentDirection = 1;\n    }\n\n    if (currentDirection) {\n      changeRangePickerColorByPosition((rangePicker.pointer.left || 0) + (['ArrowLeft', 'ArrowRight'].includes(e.key) ? currentDirection : 0), (rangePicker.pointer.top || 0) + (['ArrowUp', 'ArrowDown'].includes(e.key) ? currentDirection : 0), bar.color);\n    }\n  };\n\n  var validateHexAndUpdate = function validateHexAndUpdate(color) {\n    var testHex = validateHex(color);\n\n    if (testHex) {\n      changeRangePickerPointerPosByColor(color);\n    }\n\n    setHexInputValue(color);\n  };\n\n  useEffect(function () {\n    changeBarPosByColor(rangePicker.color);\n    changeRangePickerPointerPosByColor(rangePicker.color);\n  }, [barRef]);\n  useEffect(function () {\n    setHexInputValue(rangePicker.color);\n    updateRgb(rangePicker.color);\n  }, [rangePicker.color]);\n  var barColors = useMemo(function () {\n    return _toConsumableArray(new Array(colorsHuesCount + 1)).map(function (_, h) {\n      return /*#__PURE__*/React.createElement(Styled.BarColorStop, {\n        key: h,\n        $color: \"hsl(\".concat(h, \", 100%, 50%)\"),\n        \"data-hue\": h\n      });\n    });\n  }, []);\n  var barPointSliding = useDrag(updateBarColor, updateBarColor, null);\n  var rangePickerPointSliding = useDrag(updateRangePickerColor, updateRangePickerColor, null);\n  return /*#__PURE__*/React.createElement(Styled.ColorPickerWrapper, _extends({\n    ref: ref\n  }, rest), /*#__PURE__*/React.createElement(Styled.RangePickerWrapper, _extends({\n    ref: setRangePickerRef,\n    color: bar.color\n  }, rangePickerPointSliding), /*#__PURE__*/React.createElement(Styled.WhiteGradient, null), /*#__PURE__*/React.createElement(Styled.BlackGradient, null), /*#__PURE__*/React.createElement(Styled.ColorPointer, {\n    tabIndex: -1,\n    left: rangePicker.pointer.left || 0,\n    top: rangePicker.pointer.top || 0,\n    onKeyDown: moveRangePickerPointerByArrows,\n    considerTopWidth: true\n  })), /*#__PURE__*/React.createElement(Styled.BarWrapper, barPointSliding, /*#__PURE__*/React.createElement(Styled.Bar, {\n    ref: setBarRef\n  }, /*#__PURE__*/React.createElement(\"tbody\", null, /*#__PURE__*/React.createElement(\"tr\", null, barColors))), /*#__PURE__*/React.createElement(Styled.ColorPointer, {\n    tabIndex: -1,\n    left: bar.pointerLeft,\n    onKeyDown: moveBarPointerByArrows,\n    considerTopWidth: false,\n    style: {\n      top: -3\n    }\n  })), /*#__PURE__*/React.createElement(Styled.ColorItemsContainer, null, localPinnedColors.map(function (color) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"item\",\n      key: color\n    }, /*#__PURE__*/React.createElement(ColorItem, {\n      value: color,\n      checked: isColorChecked(color),\n      onChange: function onChange(ev) {\n        return changeRangePickerPointerPosByColor(ev.target.value);\n      }\n    }));\n  })), /*#__PURE__*/React.createElement(Styled.ColorPickerAction, null, /*#__PURE__*/React.createElement(Styled.Select, {\n    value: inputType\n  }, /*#__PURE__*/React.createElement(Select, {\n    size: \"sm\",\n    value: inputType,\n    MenuProps: {\n      zIndex: 11112\n    },\n    onChange: function onChange(ev) {\n      return setInputType(ev);\n    },\n    fullWidth: true\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"hex\"\n  }, \"Hex\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"rgb\"\n  }, \"RGB\"))), inputType === 'hex' ? /*#__PURE__*/React.createElement(Input, {\n    size: \"sm\",\n    error: !/^#([\\da-f]{3}){1,2}$/i.test(rangePicker.color),\n    value: hexInputValue,\n    onChange: function onChange(e) {\n      return validateHexAndUpdate(e.target.value);\n    },\n    style: {\n      width: '45%'\n    }\n  }) : rgbColorValue.map(function (rgb, index) {\n    return /*#__PURE__*/React.createElement(Input // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: index,\n      size: \"sm\",\n      value: rgb,\n      onChange: function onChange(e) {\n        var _e$target;\n\n        return handleRgbInput(Number((_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.value), index);\n      },\n      style: {\n        width: '20%'\n      }\n    });\n  }), rangePicker.color !== transparentColorHex && /*#__PURE__*/React.createElement(Styled.ColorPickerIcon, {\n    onClick: function onClick() {\n      return localPinnedColors.some(function (checkedColor) {\n        return isColorChecked(checkedColor);\n      }) ? handlePinnedColors(rangePicker.color, 'delete') : handlePinnedColors(rangePicker.color, 'add');\n    }\n  }, localPinnedColors.some(function (checkedColor) {\n    return isColorChecked(checkedColor);\n  }) ? /*#__PURE__*/React.createElement(DeleteOutline, null) : /*#__PURE__*/React.createElement(PinOutline, null))));\n});\nColorPicker.defaultProps = {\n  defaultColor: '#000000',\n  pinnedColors: [],\n  showTransparentColor: false\n};\nColorPicker.propTypes = {\n  defaultColor: PT.string,\n  onChange: PT.func,\n  // eslint-disable-next-line react/forbid-prop-types\n  pinnedColors: PT.array,\n  showTransparentColor: PT.bool\n};\nexport default ColorPicker;"]},"metadata":{},"sourceType":"module"}