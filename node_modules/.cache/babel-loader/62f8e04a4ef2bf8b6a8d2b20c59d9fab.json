{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useRef, useState } from \"react\";\nimport Button from \"@scaleflex/ui/core/button\";\nimport { useAnnotation, useStore } from \"../../../hooks\";\nimport { FEEDBACK_STATUSES, TOOLS_IDS } from \"../../../utils/constants\";\nimport { SET_FEEDBACK } from \"../../../actions\";\nimport HiddenUploadInput from \"../../common/HiddenUploadInput\";\nimport ImageControls from \"./ImageControls\";\n\nvar ADDED_IMG_SPACING_PERCENT = .15,\n    ImageOptions = function () {\n  var a = useState(),\n      b = _slicedToArray(a, 2),\n      c = b[0],\n      d = b[1],\n      e = useRef(),\n      f = useStore(),\n      g = f.shownImageDimensions,\n      h = f.dispatch,\n      i = f.adjustments.crop,\n      j = void 0 === i ? {} : i,\n      k = f.t,\n      l = useAnnotation({\n    name: TOOLS_IDS.IMAGE,\n    opacity: 1\n  }, !1),\n      m = _slicedToArray(l, 3),\n      n = m[0],\n      o = m[1],\n      p = m[2],\n      q = useRef(0),\n      r = function (a) {\n    var b = j.width || g.width,\n        c = j.height || g.height,\n        d = j.x || 0,\n        e = j.y || 0,\n        f = Math.min(1, b / (a.width + a.width * ADDED_IMG_SPACING_PERCENT), c / (a.height + a.height * ADDED_IMG_SPACING_PERCENT));\n    p({\n      image: a,\n      x: d + b / 2 - a.width * f / 2,\n      y: e + c / 2 - a.height * f / 2,\n      width: a.width * f,\n      height: a.height * f\n    });\n  },\n      s = function (a) {\n    q.current += 1, q.current === a && (q.current = 0, d(!1));\n  },\n      t = function (a) {\n    h({\n      type: SET_FEEDBACK,\n      payload: {\n        feedback: {\n          message: a,\n          status: FEEDBACK_STATUSES.WARNING\n        }\n      }\n    });\n  };\n\n  return React.createElement(ImageControls, {\n    image: n,\n    saveImage: o,\n    t: k\n  }, React.createElement(Button, {\n    className: \"FIE_image-tool-add-option\",\n    color: \"secondary\",\n    onClick: c ? void 0 : function triggerUploadInput() {\n      e.current && e.current.click();\n    },\n    disabled: c,\n    size: \"sm\",\n    style: {\n      maxHeight: 24\n    }\n  }, c ? k(\"importing\") : k(\"addImage\")), React.createElement(HiddenUploadInput, {\n    ref: e,\n    onChange: c ? void 0 : function importImages(a) {\n      if (a.target.files) {\n        d(!0);\n        var b = [],\n            c = Array.from(a.target.files),\n            e = c.length;\n\n        if (c.forEach(function (a) {\n          if (a.type.startsWith(\"image/\")) {\n            var c = new Image();\n            c.onload = function () {\n              r(c), URL.revokeObjectURL(a), s(e);\n            }, c.onerror = function () {\n              t(k(\"uploadImageError\")), s(e);\n            }, c.src = URL.createObjectURL(a);\n          } else b.push(a.name), s(e);\n        }), 0 < b.length) {\n          var f = 1 < b.length ? k(\"areNotImages\") : k(\"isNotImage\");\n          t(\"\".concat(b.join(\", \"), \" \").concat(f, \" \").concat(k(\"toBeUploaded\"), \".\"));\n        }\n      }\n\n      a.target.value = \"\";\n    },\n    disabled: c,\n    multiple: !0\n  }));\n};\n\nexport default ImageOptions;","map":{"version":3,"sources":["/Users/devusama/Work/FYP_FrontEnd/node_modules/react-filerobot-image-editor/lib/components/tools/Image/ImageOptions.js"],"names":["_slicedToArray","React","useRef","useState","Button","useAnnotation","useStore","FEEDBACK_STATUSES","TOOLS_IDS","SET_FEEDBACK","HiddenUploadInput","ImageControls","ADDED_IMG_SPACING_PERCENT","ImageOptions","a","b","c","d","e","f","g","shownImageDimensions","h","dispatch","i","adjustments","crop","j","k","t","l","name","IMAGE","opacity","m","n","o","p","q","r","width","height","x","y","Math","min","image","s","current","type","payload","feedback","message","status","WARNING","createElement","saveImage","className","color","onClick","triggerUploadInput","click","disabled","size","style","maxHeight","ref","onChange","importImages","target","files","Array","from","length","forEach","startsWith","Image","onload","URL","revokeObjectURL","onerror","src","createObjectURL","push","concat","join","value","multiple"],"mappings":"AAAA,OAAOA,cAAP,MAA0B,sCAA1B;AAAiE,OAAOC,KAAP,IAAcC,MAAd,EAAqBC,QAArB,QAAkC,OAAlC;AAA0C,OAAOC,MAAP,MAAkB,2BAAlB;AAA8C,SAAOC,aAAP,EAAqBC,QAArB,QAAkC,gBAAlC;AAAmD,SAAOC,iBAAP,EAAyBC,SAAzB,QAAuC,0BAAvC;AAAkE,SAAOC,YAAP,QAAwB,kBAAxB;AAA2C,OAAOC,iBAAP,MAA6B,gCAA7B;AAA8D,OAAOC,aAAP,MAAyB,iBAAzB;;AAA2C,IAAIC,yBAAyB,GAAC,GAA9B;AAAA,IAAkCC,YAAY,GAAC,YAAU;AAAC,MAAIC,CAAC,GAACX,QAAQ,EAAd;AAAA,MAAiBY,CAAC,GAACf,cAAc,CAACc,CAAD,EAAG,CAAH,CAAjC;AAAA,MAAuCE,CAAC,GAACD,CAAC,CAAC,CAAD,CAA1C;AAAA,MAA8CE,CAAC,GAACF,CAAC,CAAC,CAAD,CAAjD;AAAA,MAAqDG,CAAC,GAAChB,MAAM,EAA7D;AAAA,MAAgEiB,CAAC,GAACb,QAAQ,EAA1E;AAAA,MAA6Ec,CAAC,GAACD,CAAC,CAACE,oBAAjF;AAAA,MAAsGC,CAAC,GAACH,CAAC,CAACI,QAA1G;AAAA,MAAmHC,CAAC,GAACL,CAAC,CAACM,WAAF,CAAcC,IAAnI;AAAA,MAAwIC,CAAC,GAAC,KAAK,CAAL,KAASH,CAAT,GAAW,EAAX,GAAcA,CAAxJ;AAAA,MAA0JI,CAAC,GAACT,CAAC,CAACU,CAA9J;AAAA,MAAgKC,CAAC,GAACzB,aAAa,CAAC;AAAC0B,IAAAA,IAAI,EAACvB,SAAS,CAACwB,KAAhB;AAAsBC,IAAAA,OAAO,EAAC;AAA9B,GAAD,EAAkC,CAAC,CAAnC,CAA/K;AAAA,MAAqNC,CAAC,GAAClC,cAAc,CAAC8B,CAAD,EAAG,CAAH,CAArO;AAAA,MAA2OK,CAAC,GAACD,CAAC,CAAC,CAAD,CAA9O;AAAA,MAAkPE,CAAC,GAACF,CAAC,CAAC,CAAD,CAArP;AAAA,MAAyPG,CAAC,GAACH,CAAC,CAAC,CAAD,CAA5P;AAAA,MAAgQI,CAAC,GAACpC,MAAM,CAAC,CAAD,CAAxQ;AAAA,MAA4QqC,CAAC,GAAC,UAASzB,CAAT,EAAW;AAAC,QAAIC,CAAC,GAACY,CAAC,CAACa,KAAF,IAASpB,CAAC,CAACoB,KAAjB;AAAA,QAAuBxB,CAAC,GAACW,CAAC,CAACc,MAAF,IAAUrB,CAAC,CAACqB,MAArC;AAAA,QAA4CxB,CAAC,GAACU,CAAC,CAACe,CAAF,IAAK,CAAnD;AAAA,QAAqDxB,CAAC,GAACS,CAAC,CAACgB,CAAF,IAAK,CAA5D;AAAA,QAA8DxB,CAAC,GAACyB,IAAI,CAACC,GAAL,CAAS,CAAT,EAAW9B,CAAC,IAAED,CAAC,CAAC0B,KAAF,GAAQ1B,CAAC,CAAC0B,KAAF,GAAQ5B,yBAAlB,CAAZ,EAAyDI,CAAC,IAAEF,CAAC,CAAC2B,MAAF,GAAS3B,CAAC,CAAC2B,MAAF,GAAS7B,yBAApB,CAA1D,CAAhE;AAA0KyB,IAAAA,CAAC,CAAC;AAACS,MAAAA,KAAK,EAAChC,CAAP;AAAS4B,MAAAA,CAAC,EAACzB,CAAC,GAACF,CAAC,GAAC,CAAJ,GAAMD,CAAC,CAAC0B,KAAF,GAAQrB,CAAR,GAAU,CAA3B;AAA6BwB,MAAAA,CAAC,EAACzB,CAAC,GAACF,CAAC,GAAC,CAAJ,GAAMF,CAAC,CAAC2B,MAAF,GAAStB,CAAT,GAAW,CAAhD;AAAkDqB,MAAAA,KAAK,EAAC1B,CAAC,CAAC0B,KAAF,GAAQrB,CAAhE;AAAkEsB,MAAAA,MAAM,EAAC3B,CAAC,CAAC2B,MAAF,GAAStB;AAAlF,KAAD,CAAD;AAAwF,GAA5hB;AAAA,MAA6hB4B,CAAC,GAAC,UAASjC,CAAT,EAAW;AAACwB,IAAAA,CAAC,CAACU,OAAF,IAAW,CAAX,EAAaV,CAAC,CAACU,OAAF,KAAYlC,CAAZ,KAAgBwB,CAAC,CAACU,OAAF,GAAU,CAAV,EAAY/B,CAAC,CAAC,CAAC,CAAF,CAA7B,CAAb;AAAgD,GAA3lB;AAAA,MAA4lBY,CAAC,GAAC,UAASf,CAAT,EAAW;AAACQ,IAAAA,CAAC,CAAC;AAAC2B,MAAAA,IAAI,EAACxC,YAAN;AAAmByC,MAAAA,OAAO,EAAC;AAACC,QAAAA,QAAQ,EAAC;AAACC,UAAAA,OAAO,EAACtC,CAAT;AAAWuC,UAAAA,MAAM,EAAC9C,iBAAiB,CAAC+C;AAApC;AAAV;AAA3B,KAAD,CAAD;AAAuF,GAAjsB;;AAAksB,SAAOrD,KAAK,CAACsD,aAAN,CAAoB5C,aAApB,EAAkC;AAACmC,IAAAA,KAAK,EAACX,CAAP;AAASqB,IAAAA,SAAS,EAACpB,CAAnB;AAAqBP,IAAAA,CAAC,EAACD;AAAvB,GAAlC,EAA4D3B,KAAK,CAACsD,aAAN,CAAoBnD,MAApB,EAA2B;AAACqD,IAAAA,SAAS,EAAC,2BAAX;AAAuCC,IAAAA,KAAK,EAAC,WAA7C;AAAyDC,IAAAA,OAAO,EAAC3C,CAAC,GAAC,KAAK,CAAN,GAAQ,SAAS4C,kBAAT,GAA6B;AAAC1C,MAAAA,CAAC,CAAC8B,OAAF,IAAW9B,CAAC,CAAC8B,OAAF,CAAUa,KAAV,EAAX;AAA6B,KAArI;AAAsIC,IAAAA,QAAQ,EAAC9C,CAA/I;AAAiJ+C,IAAAA,IAAI,EAAC,IAAtJ;AAA2JC,IAAAA,KAAK,EAAC;AAACC,MAAAA,SAAS,EAAC;AAAX;AAAjK,GAA3B,EAA4MjD,CAAC,GAACY,CAAC,CAAC,WAAD,CAAF,GAAgBA,CAAC,CAAC,UAAD,CAA9N,CAA5D,EAAwS3B,KAAK,CAACsD,aAAN,CAAoB7C,iBAApB,EAAsC;AAACwD,IAAAA,GAAG,EAAChD,CAAL;AAAOiD,IAAAA,QAAQ,EAACnD,CAAC,GAAC,KAAK,CAAN,GAAQ,SAASoD,YAAT,CAAsBtD,CAAtB,EAAwB;AAAC,UAAGA,CAAC,CAACuD,MAAF,CAASC,KAAZ,EAAkB;AAACrD,QAAAA,CAAC,CAAC,CAAC,CAAF,CAAD;AAAM,YAAIF,CAAC,GAAC,EAAN;AAAA,YAASC,CAAC,GAACuD,KAAK,CAACC,IAAN,CAAW1D,CAAC,CAACuD,MAAF,CAASC,KAApB,CAAX;AAAA,YAAsCpD,CAAC,GAACF,CAAC,CAACyD,MAA1C;;AAAiD,YAAGzD,CAAC,CAAC0D,OAAF,CAAU,UAAS5D,CAAT,EAAW;AAAC,cAAGA,CAAC,CAACmC,IAAF,CAAO0B,UAAP,CAAkB,QAAlB,CAAH,EAA+B;AAAC,gBAAI3D,CAAC,GAAC,IAAI4D,KAAJ,EAAN;AAAgB5D,YAAAA,CAAC,CAAC6D,MAAF,GAAS,YAAU;AAACtC,cAAAA,CAAC,CAACvB,CAAD,CAAD,EAAK8D,GAAG,CAACC,eAAJ,CAAoBjE,CAApB,CAAL,EAA4BiC,CAAC,CAAC7B,CAAD,CAA7B;AAAiC,aAArD,EAAsDF,CAAC,CAACgE,OAAF,GAAU,YAAU;AAACnD,cAAAA,CAAC,CAACD,CAAC,CAAC,kBAAD,CAAF,CAAD,EAAyBmB,CAAC,CAAC7B,CAAD,CAA1B;AAA8B,aAAzG,EAA0GF,CAAC,CAACiE,GAAF,GAAMH,GAAG,CAACI,eAAJ,CAAoBpE,CAApB,CAAhH;AAAuI,WAAvL,MAA4LC,CAAC,CAACoE,IAAF,CAAOrE,CAAC,CAACiB,IAAT,GAAegB,CAAC,CAAC7B,CAAD,CAAhB;AAAoB,SAAtO,GAAwO,IAAEH,CAAC,CAAC0D,MAA/O,EAAsP;AAAC,cAAItD,CAAC,GAAC,IAAEJ,CAAC,CAAC0D,MAAJ,GAAW7C,CAAC,CAAC,cAAD,CAAZ,GAA6BA,CAAC,CAAC,YAAD,CAApC;AAAmDC,UAAAA,CAAC,CAAC,GAAGuD,MAAH,CAAUrE,CAAC,CAACsE,IAAF,CAAO,IAAP,CAAV,EAAuB,GAAvB,EAA4BD,MAA5B,CAAmCjE,CAAnC,EAAqC,GAArC,EAA0CiE,MAA1C,CAAiDxD,CAAC,CAAC,cAAD,CAAlD,EAAmE,GAAnE,CAAD,CAAD;AAA2E;AAAC;;AAAAd,MAAAA,CAAC,CAACuD,MAAF,CAASiB,KAAT,GAAe,EAAf;AAAkB,KAApgB;AAAqgBxB,IAAAA,QAAQ,EAAC9C,CAA9gB;AAAghBuE,IAAAA,QAAQ,EAAC,CAAC;AAA1hB,GAAtC,CAAxS,CAAP;AAAo3B,CAAhnD;;AAAinD,eAAe1E,YAAf","sourcesContent":["import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useRef,useState}from\"react\";import Button from\"@scaleflex/ui/core/button\";import{useAnnotation,useStore}from\"../../../hooks\";import{FEEDBACK_STATUSES,TOOLS_IDS}from\"../../../utils/constants\";import{SET_FEEDBACK}from\"../../../actions\";import HiddenUploadInput from\"../../common/HiddenUploadInput\";import ImageControls from\"./ImageControls\";var ADDED_IMG_SPACING_PERCENT=.15,ImageOptions=function(){var a=useState(),b=_slicedToArray(a,2),c=b[0],d=b[1],e=useRef(),f=useStore(),g=f.shownImageDimensions,h=f.dispatch,i=f.adjustments.crop,j=void 0===i?{}:i,k=f.t,l=useAnnotation({name:TOOLS_IDS.IMAGE,opacity:1},!1),m=_slicedToArray(l,3),n=m[0],o=m[1],p=m[2],q=useRef(0),r=function(a){var b=j.width||g.width,c=j.height||g.height,d=j.x||0,e=j.y||0,f=Math.min(1,b/(a.width+a.width*ADDED_IMG_SPACING_PERCENT),c/(a.height+a.height*ADDED_IMG_SPACING_PERCENT));p({image:a,x:d+b/2-a.width*f/2,y:e+c/2-a.height*f/2,width:a.width*f,height:a.height*f})},s=function(a){q.current+=1,q.current===a&&(q.current=0,d(!1))},t=function(a){h({type:SET_FEEDBACK,payload:{feedback:{message:a,status:FEEDBACK_STATUSES.WARNING}}})};return React.createElement(ImageControls,{image:n,saveImage:o,t:k},React.createElement(Button,{className:\"FIE_image-tool-add-option\",color:\"secondary\",onClick:c?void 0:function triggerUploadInput(){e.current&&e.current.click()},disabled:c,size:\"sm\",style:{maxHeight:24}},c?k(\"importing\"):k(\"addImage\")),React.createElement(HiddenUploadInput,{ref:e,onChange:c?void 0:function importImages(a){if(a.target.files){d(!0);var b=[],c=Array.from(a.target.files),e=c.length;if(c.forEach(function(a){if(a.type.startsWith(\"image/\")){var c=new Image;c.onload=function(){r(c),URL.revokeObjectURL(a),s(e)},c.onerror=function(){t(k(\"uploadImageError\")),s(e)},c.src=URL.createObjectURL(a)}else b.push(a.name),s(e)}),0<b.length){var f=1<b.length?k(\"areNotImages\"):k(\"isNotImage\");t(\"\".concat(b.join(\", \"),\" \").concat(f,\" \").concat(k(\"toBeUploaded\"),\".\"))}}a.target.value=\"\"},disabled:c,multiple:!0}))};export default ImageOptions;"]},"metadata":{},"sourceType":"module"}